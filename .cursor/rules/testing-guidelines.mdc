---
description: "Testing conventions"
globs: tests/**,ai_development_docs\AI_TESTING_GUIDE.md
alwaysApply: false
file: ".cursor/rules/testing-guidelines.mdc"
---
# Test Suite Guidance

- Use helpers from `tests/test_utilities.py` for fixtures, fake data, and shared assertions.
- Ensure tests leave no artefacts outside the tests directory; clean up any temporary files they create.
- Prefer deterministic tests with clear naming (for example `test_feature_behavior_expected`); document gaps via TODO entries when necessary.
- Mock scheduler integrations to prevent real Windows scheduled tasks (e.g., patch `set_wake_timer` and related methods).
- Review `ai_development_docs/AI_TESTING_GUIDE.md` when adding or changing tests; for additional detail see `tests/TESTING_GUIDE.md`.
- Keep test data inside `tests/data/` and remove any generated artefacts during cleanup.
- **AI Functionality Tests**: Run with `python tests/ai/run_ai_functionality_tests.py`. These are manual review tests that automatically validate AI responses for quality issues. Results in `tests/ai/results/`, logs in `tests/logs/test_consolidated.log` and `test_run.log`.
- **Parallel Execution**: Use `@pytest.mark.no_parallel` for tests that modify real files, use shared resources, or require exclusive access to prevent conflicts when running with pytest-xdist.
