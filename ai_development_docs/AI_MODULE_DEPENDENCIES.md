# AI Module Dependencies - Key Relationships & Patterns

> **File**: `ai_development_docs/AI_MODULE_DEPENDENCIES.md`
> **Generated**: This file is auto-generated by generate_module_dependencies.py. Do not edit manually.
> **Generated by**: generate_module_dependencies.py - Module Dependencies Generator
> **Last Generated**: 2025-12-02 06:21:02
> **Source**: python development_tools/generate_module_dependencies.py

> **Audience**: AI collaborators
> **Purpose**: Essential module relationships and dependency patterns for AI context
> **Style**: Pattern-focused, relationship-driven, actionable

## Current Status

### Dependency Coverage: 100.0% - COMPLETED
- **Files Scanned**: 327
- **Total Imports**: 3771
- **Standard Library**: 1276 (33.8%)
- **Third-Party**: 561 (14.9%)
- **Local Imports**: 1934 (51.3%)

## Dependency Decision Trees

### Need Core System Access?
Core System Dependencies:
- Configuration and Setup
  - core/config.py <- standard library (os, pathlib, typing), third-party (dotenv), error_handling, logger
  - core/logger.py <- standard library (glob, gzip, json, logging), error_handling, config
- Data Management
  - core/file_operations.py <- standard library (datetime, json, os, pathlib), logger, config, error_handling, file_auditor, message_management (+1 more)
  - core/user_data_handlers.py <- standard library (os, traceback, typing), logger, error_handling, config, user_data_validation, schemas (+5 more)
  - core/user_data_manager.py <- standard library (datetime, json, os, pathlib), logger, config, file_operations, user_data_handlers, schemas (+5 more)
- Error Handling
  - core/error_handling.py <- standard library (asyncio, datetime, json, logging), service_utilities, logger

### Need AI or Chatbot Support?
AI System Dependencies:
- AI Core
  - user/context_manager.py <- standard library (datetime, typing), logger, user_data_handlers, response_tracking, message_management, schedule_utilities (+2 more)
  - user/user_context.py <- standard library (threading), logger, user_data_handlers, error_handling, schedule_utilities
- Command Processing
  - communication/command_handlers/account_handler.py <- standard library (asyncio, secrets, string, time), logger, error_handling, user_management, user_data_handlers, user_data_manager (+4 more)
  - communication/command_handlers/analytics_handler.py <- standard library (collections, typing), logger, error_handling, base_handler, shared_types, checkin_analytics (+3 more)
  - communication/command_handlers/base_handler.py <- standard library (abc, typing), shared_types, logger, error_handling
- Communication Integration
  - communication/communication_channels/__init__.py <- none
  - communication/core/channel_monitor.py <- standard library (datetime, threading, time, typing), logger, error_handling, base_channel

### Need Communication Channel Coverage?
Communication Dependencies:
- Channel Infrastructure
  - communication/command_handlers/base_handler.py <- standard library (abc, typing), shared_types, logger, error_handling
  - communication/core/factory.py <- standard library (importlib, typing), base_channel, logger, error_handling, config
  - communication/communication_channels/base/base_channel.py <- standard library (abc, dataclasses, enum, typing), logger, error_handling
- Specific Channels
  - communication/communication_channels/discord/account_flow_handler.py <- standard library (typing), third-party (discord), logger, error_handling, shared_types, account_handler, user_management
  - communication/communication_channels/discord/api_client.py <- standard library (asyncio, dataclasses, time, typing), third-party (discord), logger, error_handling
- Conversation Flow
  - communication/message_processing/conversation_flow_manager.py <- standard library (datetime, json, os, pathlib), chatbot, logger, user_data_handlers, response_tracking, error_handling (+9 more)
  - communication/communication_channels/discord/account_flow_handler.py <- standard library (typing), third-party (discord), logger, error_handling, shared_types, account_handler, user_management

### Need UI Dependencies?
UI Dependencies:
- Main Application
  - ui/ui_app_qt.py <- standard library (datetime, json, os, pathlib), third-party (PySide6.QtCore, PySide6.QtGui, PySide6.QtWidgets), logger, config, error_handling, user_context, user_data_handlers (+18 more)
- Dialogs
  - ui/dialogs/account_creator_dialog.py <- standard library (pathlib, time, typing, uuid), third-party (PySide6.QtCore, PySide6.QtWidgets), logger, user_data_validation, user_management, error_handling, category_selection_widget (+11 more)
  - ui/dialogs/admin_panel.py <- third-party (PySide6.QtCore, PySide6.QtWidgets), logger, error_handling
  - ui/dialogs/category_management_dialog.py <- third-party (PySide6.QtCore, PySide6.QtWidgets), category_management_dialog_pyqt, category_selection_widget, logger, user_data_handlers, error_handling (+1 more)
- Widgets
  - ui/generated/category_selection_widget_pyqt.py <- third-party (PySide6.QtCore, PySide6.QtGui, PySide6.QtWidgets)
  - ui/generated/channel_selection_widget_pyqt.py <- third-party (PySide6.QtCore, PySide6.QtGui, PySide6.QtWidgets)
  - ui/generated/checkin_settings_widget_pyqt.py <- third-party (PySide6.QtCore, PySide6.QtGui, PySide6.QtWidgets)


## Key Dependency Patterns

### Core -> Communication and AI (most common)
Communication and AI modules depend on core system modules.
- `communication/__init__.py` -> core.retry_manager, core.channel_orchestrator, core.channel_orchestrator
- `communication/command_handlers/account_handler.py` -> core.logger, core.error_handling, core.user_management
- `communication/command_handlers/analytics_handler.py` -> core.logger, core.error_handling, core.checkin_analytics

### UI -> Core
UI modules rely on core configuration and data access.
- `ui/generate_ui_files.py` -> core.error_handling
- `ui/ui_app_qt.py` -> core.logger, core.config, core.error_handling

### Communication -> Communication
Communication modules compose other communication utilities for complete flows.
- `communication/command_handlers/account_handler.py` -> communication.command_handlers.base_handler, communication.command_handlers.shared_types, communication.command_handlers.account_handler
- `communication/command_handlers/analytics_handler.py` -> communication.command_handlers.base_handler, communication.command_handlers.shared_types

### Third-Party Integration
External libraries provide channel and UI support.
- `core/config.py` -> dotenv
- `core/headless_service.py` -> psutil
- `core/scheduler.py` -> schedule, pytz
- `core/schemas.py` -> pydantic, pytz
- `core/service.py` -> psutil


## Critical Dependencies for AI Context

### Entry Points
- `tests/ai/run_ai_functionality_tests.py` -> standard library (datetime, glob, logging, os), test_utilities, logger, test_ai_core, test_ai_integration, test_ai_errors (+4 more) (main application entry)
- `tests/development_tools/test_run_development_tools.py` -> standard library (pathlib, subprocess, sys), third-party (pytest) (main application entry)
- `tests/ui/test_ui_app_qt_main.py` -> standard library (pathlib, unittest.mock), third-party (PySide6.QtWidgets, pytest), conftest, ui_app_qt, test_utilities (application entry)
- `run_headless_service.py` -> standard library (sys), headless_service, logger (main application entry)
- `run_mhm.py` -> standard library (os, pathlib, subprocess, sys), error_handling (main application entry)

### Data Flow
- file_operations.py: core/file_operations.py <- standard library (datetime, json, os, pathlib), logger, config, error_handling, file_auditor, message_management (+1 more)
- user_data_handlers.py: core/user_data_handlers.py <- standard library (os, traceback, typing), logger, error_handling, config, user_data_validation, schemas (+5 more)
- user_data_manager.py: core/user_data_manager.py <- standard library (datetime, json, os, pathlib), logger, config, file_operations, user_data_handlers, schemas (+5 more)

### Communication Flow
- __init__: communication/__init__.py <- third-party (command_handlers.analytics_handler, command_handlers.base_handler, command_handlers.interaction_handlers), retry_manager, channel_orchestrator, factory, channel_monitor
- account_handler: communication/command_handlers/account_handler.py <- standard library (asyncio, secrets, string, time), logger, error_handling, user_management, user_data_handlers, user_data_manager (+4 more)
- analytics_handler: communication/command_handlers/analytics_handler.py <- standard library (collections, typing), logger, error_handling, base_handler, shared_types, checkin_analytics (+3 more)


## Dependency Risk Areas

### High Coupling
- `tests/integration/test_account_lifecycle.py` -> 63 local dependencies (heavy coupling)
- `tests/conftest.py` -> 49 local dependencies (heavy coupling)
- `tests/ui/test_account_creation_ui.py` -> 47 local dependencies (heavy coupling)
- `ui/ui_app_qt.py` -> 42 local dependencies (heavy coupling)
- `core/user_management.py` -> 40 local dependencies (heavy coupling)

### Third-Party Risks
- `tests/conftest.py` -> pytest (178 modules use this)
- `ui/ui_app_qt.py` -> PySide6.QtWidgets (80 modules use this)
- `ui/ui_app_qt.py` -> PySide6.QtCore (62 modules use this)
- `ui/ui_app_qt.py` -> PySide6.QtGui (36 modules use this)
- `communication/communication_channels/base/command_registry.py` -> discord (16 modules use this)

### Circular Dependencies to Monitor
- `core/config.py` <-> `core/logger.py`
- `core/error_handling.py` <-> `core/service_utilities.py`
- `core/error_handling.py` <-> `core/logger.py`
- `core/file_operations.py` <-> `core/message_management.py`
- `core/file_operations.py` <-> `core/user_data_manager.py`


## Quick Reference for AI

### Common Patterns
1. Core system modules expose utilities with minimal dependencies.
2. Communication and AI modules depend on core and peer communication modules.
3. UI modules rely on the UI framework and core services.
4. Data access modules rely on configuration plus logging.

### Dependency Guidelines
- Prefer core modules for shared logic instead of duplicating functionality.
- Avoid circular dependencies; break them with interfaces or utility modules.
- Use dependency injection for testability when modules call into services.
- Keep third-party usage wrapped by dedicated modules.

### Module Organisation
- `ai/` - Chatbot functionality (depends on core)
- `communication/` - Channels and message processing (depends on core)
- `core/` - System utilities (minimal dependencies)
- `tasks/` - Task management (depends on core)
- `tests/` - Module directory
- `ui/` - User interface (depends on core, limited communication dependencies)
- `user/` - User context (depends on core)

> **For complete dependency details, see [MODULE_DEPENDENCIES_DETAIL.md](development_docs/MODULE_DEPENDENCIES_DETAIL.md)**